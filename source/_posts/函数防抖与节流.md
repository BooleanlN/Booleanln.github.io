---
layout: ‘
title: 函数防抖与节流
date: 2019-07-04 22:41:42
tags:
- javaScript
---

### 函数防抖与节流

之前经历了网易云的一面二面，从第一面开始，面试官频繁问我关于页面优化的问题。可惜自己大项目经验少，没做过性能优化这块，答的模棱两可，尤其是函数防抖与节流这个知识点。

函数节流与防抖主要是应用在以下场景：

- 事件绑定在窗口滚动上
- 输入框实时请求
- 其他会在很短时间内启动多次的浏览器事件

面试题目是要求对输入框绑定事件，要求停止输入内容后1000毫秒进行请求

```js
let context = document.getElementById('context')
// 未加防抖措施，会多次请求，造成性能问题
context.addEventListener('input', function(e){
	console.log(e.target.value)
})
//加防抖措施
let timeout
context.addEventListener('input', function(e){
		clearTimeout(timeout)
		console.log("开始请求")
		timeout = setTimeout(function(){
				console.log('延时请求：'+e.target.value)
			},1000)
})
```

当时忘记每轮清除定时器，这样的话，每次都会创建一个新的定时器加在异步队列当中，就达不到应该有的效果了

以上用的便是函数的防抖

防抖的意思是，避免频繁多次调用事件，通过定时器，隔一段时间调用一次事件

而节流则是，在前一次结束的接触上隔一段时间执行下一次

<!--more -->

```js
// 节流
let flag = true
window.onscroll = function(e){
	if(!flag){
		return
	}
	//成功执行一次
	flag = false 
	setTimeout(function(){
		flag = true //执行完一次，可以执行下一次了
		console.log('d0 scroll')
	}, 1000)
}
```

